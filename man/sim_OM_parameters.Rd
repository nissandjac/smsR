% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_OM_parameters.R
\name{sim_OM_parameters}
\alias{sim_OM_parameters}
\title{Prepare a parameter list for a simulated `smsR` stock (Operating Model)}
\usage{
sim_OM_parameters(
  nseason = 1,
  nspace = 1,
  nyear = 50,
  F0 = 0.2,
  Linf = 30,
  weca = NULL,
  west = NULL,
  K = 1,
  Fpast = 0,
  t0 = -0.1,
  gamma = 1.1,
  tau = 5,
  gamma_sel = 1.1,
  tau_sel = 1,
  maxage = 10,
  a = 0.01,
  b_size = 3,
  M = 0.2,
  b = 1,
  R0 = 10000,
  theta = 2,
  h = 0.5,
  SDcatch = 0.01,
  Fbarage = c(2, maxage - 3),
  nsurvey = 1,
  q = rep(1, nsurvey),
  surveySeason = rep(1, nsurvey),
  surveyStart = rep(0, nsurvey),
  surveyEnd = rep(0.99, nsurvey),
  surveySD = rep(0.3, nsurvey),
  SDR = 0.6,
  rhoR = 0.7,
  recruitment.type = "AR",
  rseason = 1,
  fishing.type = "AR",
  SDF = 0.05,
  rho_F = 0.7,
  SDM = 0.1,
  rho = 0.8,
  propM = 0,
  propF = 0,
  M_limit = NA,
  mortality = "constant",
  recruitment = "BH_steep",
  env = NULL,
  beta_env = NULL,
  Fminage = 0,
  Fmaxage = maxage,
  Qminage = rep(0, nsurvey),
  Qmaxage = rep(maxage, nsurvey),
  seed = NA
)
}
\arguments{
\item{nseason}{Integer. Number of seasons within a year (e.g., 1 = annual).}

\item{nspace}{Integer. Number of spatial areas (used to split seasonal F if > 1).}

\item{nyear}{Integer. Number of years to simulate.}

\item{F0}{Numeric or length-\code{nyear} vector. Baseline fishing mortality:
a scalar (expanded) for \code{"constant"} or the starting level for \code{"AR"}.}

\item{Linf}{Numeric or vector. Asymptotic length for von Bertalanffy growth.
If numeric, weights/lengths are generated internally; if not, provide
external weight inputs via \code{weca}/\code{west}.}

\item{weca}{Numeric array/matrix or \code{NULL}. Weight-at-age used for catch.
If \code{NULL} and \code{Linf} is numeric, generated internally.}

\item{west}{Numeric array/matrix or \code{NULL}. Weight-at-age used for SSB.
If \code{NULL} and \code{Linf} is numeric, generated internally.}

\item{K}{Numeric. von Bertalanffy growth parameter.}

\item{Fpast}{Numeric (scalar). Historical constant fishing mortality used only
to shape the initial numbers-at-age distribution (\code{Ninit}). Set 0 to skip.}

\item{t0}{Numeric. von Bertalanffy theoretical age at zero length.}

\item{gamma}{Numeric. Logistic maturity curve slope.}

\item{tau}{Numeric. Logistic maturity curve inflection age.}

\item{gamma_sel}{Numeric. Logistic fishing selectivity slope.}

\item{tau_sel}{Numeric. Logistic fishing selectivity inflection age.}

\item{maxage}{Integer. Maximum modeled age (age classes are \code{0:maxage}).}

\item{a}{Numeric. Length–weight coefficient (when generating weights from VBGF).}

\item{b_size}{Numeric. Length–weight exponent (when generating weights).}

\item{M}{Numeric. Baseline natural mortality used as the starting level or
constant value depending on \code{mortality}.}

\item{b}{Numeric or length-\code{nyear} vector. Power for production/biomass
scaling used by the simulator (passed through as \code{b} in the OM list).}

\item{R0}{Numeric. Unfished recruitment level (scales recruitment).}

\item{theta}{Numeric. Observation-model parameter (passed through).}

\item{h}{Numeric. Beverton–Holt steepness; required when
\code{recruitment \%in\% c("BH_steep","BH_env")}.}

\item{SDcatch}{Numeric (sd on log scale). Catch observation error (\code{logSDcatch}).}

\item{Fbarage}{Integer vector of length 2. Age range (inclusive) for reporting
mean F (e.g., \code{c(2, maxage - 3)}).}

\item{nsurvey}{Integer. Number of surveys.}

\item{q}{Numeric length \code{nsurvey}. Survey catchability scalars.}

\item{surveyStart}{Numeric length \code{nsurvey}. Start of survey in seasonal
time within a year (0–1).}

\item{surveyEnd}{Numeric length \code{nsurvey}. End of survey in seasonal
time within a year (0–1).}

\item{surveySD}{Numeric length \code{nsurvey}. Observation sd on survey index
(log scale).}

\item{SDR}{Numeric. Recruitment deviation sd (used with \code{recruitment.type}).}

\item{rhoR}{Numeric in [-1, 1]. AR(1) coefficient for recruitment deviations.
If 0, recruitment deviations are i.i.d. normal.}

\item{recruitment.type}{Character. Deviation process type for recruitment:
\code{"AR"} (default) or \code{"random"}.}

\item{fishing.type}{Character. Fishing-mortality dynamics: \code{"constant"} or
\code{"AR"}. When \code{"AR"}, an AR(1) process with sd \code{SDF} and
autocorrelation \code{rho_F} is applied on the log scale.}

\item{SDF}{Numeric. Process sd for the fishing-mortality AR(1) on the log scale.}

\item{rho_F}{Numeric in [-1, 1]. AR(1) coefficient for fishing mortality.}

\item{SDM}{Numeric. Process sd for natural mortality dynamics
(\code{mortality != "constant"}).}

\item{rho}{Numeric in [-1, 1]. AR(1) coefficient for natural mortality when
\code{mortality == "AR"}.}

\item{propM}{Numeric scalar or array \code{[age, year  season]}.
Fractional timing of natural mortality within the year/season (passed through).}

\item{propF}{Numeric scalar or array \code{[age , year , season]}.
Fractional timing of fishing mortality within the year/season (passed through).}

\item{M_limit}{Numeric or \code{NA}. Upper (or lower for decreasing case) bound
for time-varying M. Defaults to \code{2 * M} if \code{NA}.}

\item{mortality}{Character. Natural-mortality dynamics: \code{"constant"},
\code{"rw"} (log-random walk with cap \code{M_limit}), \code{"AR"} (log-AR(1)),
\code{"increase"} (linear +\code{SDM} per year up to \code{M_limit}), or
\code{"decrease"} (linear -\code{SDM} per year down to \code{M_limit}, floored at 0).}

\item{recruitment}{Character. Stock–recruit relationship: \code{"BH_steep"}
(Beverton–Holt with steepness), \code{"BH_env"} (BH with environmental effect
\code{beta_env} and \code{env}), or other options the simulator accepts;
value is passed through to the OM list.}

\item{env}{\code{NULL}, vector, or matrix. Environmental covariate(s) used when
\code{recruitment == "BH_env"}. Will be coerced to a matrix if provided.}

\item{beta_env}{Numeric or \code{NULL}. Coefficient(s) for the environmental
effect in \code{BH_env}. Required when \code{recruitment == "BH_env"}.}

\item{Fminage}{Integer. Minimum age fished (selectivity forced to 0 below this).}

\item{Fmaxage}{Integer. Maximum age fished (selectivity forced to 0 above this).}

\item{Qminage}{Integer vector length \code{nsurvey}. Minimum age selected by each survey.}

\item{Qmaxage}{Integer vector length \code{nsurvey}. Maximum age selected by each survey.}

\item{seed}{Integer or \code{NA}. RNG seed. If \code{NA}, a random seed is drawn.}
}
\value{
A named list of operating-model inputs. Important elements include:
\itemize{
  \item \code{west}, \code{weca}: weights for SSB and catch
  \item \code{mat}, \code{Fsel}, \code{Q}: maturity, fishing selectivity, survey selectivity
  \item \code{M}: time series of natural mortality
  \item \code{F0}: matrix of fishing mortality
  \item \code{years}, \code{age}, \code{nage}, \code{nyear}, \code{nseason}, \code{tEnd}
  \item Observation/variance parameters: \code{logSDcatch}, \code{logSDR}, \code{surveySD}
  \item Process controls and metadata: \code{rho}, \code{rhoR}, \code{SDF}, \code{SDM},
        \code{mortality}, \code{recruitment}, \code{h}, \code{env}, \code{beta_env}
}
}
\description{
Build a self-contained list of operating-model (OM) inputs for simulating an
age-structured stock with optional seasonality, surveys, time-varying fishing
mortality, autocorrelated recruitment, and several natural-mortality dynamics.
}
\details{
\strong{Growth & weights:}
If \code{Linf} is numeric, von Bertalanffy lengths are generated over
\code{season_age = seq(0, maxage + 1/nseason, by = 1/nseason)} and converted
to weights using \code{w = a * L^b_size}. Otherwise, provide \code{weca}/\code{west}.

\strong{Maturity & selectivity:}
Maturity and fishing selectivity follow logistic curves with slopes
\code{gamma}, \code{gamma_sel} and inflection ages \code{tau}, \code{tau_sel}.
Recruits (age 0) are forced to be immature.

\strong{Fishing mortality (AR option):}
When \code{fishing.type = "AR"}, an AR(1) process is applied on the log scale:
\deqn{\omega_t = \rho_F \omega_{t-1} + \sqrt{1-\rho_F^2}\,\varepsilon_t,\quad
\varepsilon_t \sim N(0, SDF^2),\quad F_t = F_1 \exp(\omega_t - 0.5\,SDF^2).}

\strong{Natural mortality:}
See \code{mortality} for options. For \code{"rw"} and \code{"AR"}, dynamics are
on the log scale; \code{"increase"}/\code{"decrease"} are linear on the natural
scale and truncated by \code{M_limit} and zero as appropriate.

\strong{Recruitment deviations:}
If \code{recruitment.type = "AR"}, log-deviations follow AR(1) with sd \code{SDR}
and coefficient \code{rhoR}; if \code{rhoR = 0}, they become i.i.d. normal.

\strong{Initial state:}
If \code{Fpast > 0}, an equilibrium-like \code{Ninit} is computed given
\code{M0[1]}, \code{Fpast}, and \code{sel}; otherwise \code{Ninit = NULL}.
}
\examples{
# Minimal annual model with constant F and constant M
om <- sim_OM_parameters(
  nseason = 1, nyear = 30, Linf = 30, K = 0.6,
  M = 0.2, F0 = 0.25, fishing.type = "constant",
  mortality = "constant", R0 = 1e5, h = 0.8, seed = 42
)

# Seasonal model with AR(1) F and AR(1) M
om_seas <- sim_OM_parameters(
  nseason = 4, nyear = 40, Linf = 35, K = 0.8,
  fishing.type = "AR", F0 = 0.2, SDF = 0.1, rho_F = 0.7,
  mortality = "AR", M = 0.25, SDM = 0.15, rho = 0.6,
  recruitment.type = "AR", SDR = 0.6, rhoR = 0.5,
  nsurvey = 2, q = c(0.6, 0.8), seed = 123
)

}
\seealso{
Functions in \pkg{smsR} that simulate or fit the OM using this list.
}
